<div class="untitled-page root" *ngIf="reviews">
    <div class="wrapper">
    <section class="box">
        <div style="text-align: center; height: 20px;">
        <h2>Ratings &amp; Reviews</h2>
        </div>
        <hr>
        <div class="wrapper2">
        <h3 class="highlights">Summary</h3>
        <div class="wrapper3" style="width: ...; margin: 0 auto;">
            <div class="cell">
            <div class="wrapper4">
                <ng-container *ngFor="let ratingStat of ratingStats.slice().reverse(); let ratingVal=index">
                    <div class="wrapper8">
                        <div class="wrapper6">
                            <div class="wrapper61">
                                {{ 5-ratingVal }}
                            </div>
                        </div>
                        <div class="cell" style="padding-left: 5px;">
                            <div fxLayout="row" fxLayoutGap="15px" fxLayoutAlign="start center" fxLayoutW style="margin-right: auto;">
                            <mat-progress-bar [value]="convertToPercent(ratingStat)" style="width: 180px;"></mat-progress-bar>
                            <span class="text" style="font-size: smaller; color: rgb(139, 139, 139);">{{ratingStat}} ({{convertToPercent(ratingStat)}}%)</span>
                            </div>
                        </div>
                    </div>
                 </ng-container>
            </div>
            </div>
            <div class="spacer" style="width: 220px;"></div>
            <div class="cell1">
            <div class="wrapper9">
                <div class="wrapper91">
                <div class="wrapper10">
                    <h2 class="wrapper12" style="padding-bottom: 0; padding-left: 20px; height: 0;" data-testid="avg-rating">
                        {{ avgRating }}
                        <mat-icon style="color: rgb(167, 123, 2);">star</mat-icon>
                    </h2>
                </div>
                <div class="info" style="padding-left: 17px;">{{ reviews.length }} reviews</div>
                </div>
            </div>
            </div>
        </div>
        </div>
        <div class="wrapper121">
        <div style="text-align: center;">
            <button
                style="width:870px; height: 50px;"
                mat-flat-button color="primary"
                (click)="openDialog()"
                data-testid="write-review-btn"
            >
                Write a review
            </button>
        </div>
        </div>
    </section>
    <section class="box1">
        <hr size="1" class="line" />
        <div style="text-align: center; margin-top: 20px;">
            <h2>Community Forum</h2>
        </div>
        <div class="box2" *ngFor="let review of reviews" data-testid="review-container">
            <review [bookId]="bookId" [review]="review" [appUser]="appUser"></review>
        </div>
    </section>
    </div>
</div>
